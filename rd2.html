<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>2. Potential Outcomes</title>
    <meta charset="utf-8" />
    <meta name="date" content="2023-09-14" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: middle, center, title-slide

.title[
# 2. Potential Outcomes
]
.date[
### 14 September 2023
]

---







### A Motivating Example

- Does ethnic intermingling exacerbate or reduce ethnic tensions?

- **Contact theory**: interethnic exposure promotes understanding, reduces prejudice, and increases interethnic trust. 

- **Conflict theory**: exposure spurs exclusionary attitudes on the part of the ethnic majority toward their ethnic others

---

### A Motivating Example

- Suppose we conduct a survey and obtain the following results:

Respondent    | Interethnic Contact | Positive attitudes
-             | -                   | -
Andrew        | 1                   | 0
Barbara       | 1                   | 1
Charlotte     | 1                   | 1
Denis         | 0                   | 0
Eric          | 0                   | 1
Fabian        | 0                   | 0


&lt;br&gt;

- Is contact **correlated** with more positive attitudes towards outgroups?

--

- Can we conclude that contact **causes** more positive attitudes towards outgroups?

---

### Causality and Potential Outcomes

- To measure the causal effect of contact, we need to observe attitudes in two (counterfactual) states of the world:

Respondent    | Attitude if Contact    |  Attitude if No Contact  |   Difference
-             | -                       | -                         |   -  
Andrew        | 0                       | 0                         |   0
Barbara       | 1                       | 0                         |   1
Charlotte     | 1                       | 1                         |   0
Denis         | 0                       | 0                         |   0
Eric          | 0                       | 1                         |   -1
Fabian        | 0                       | 0                         |   0     


---

### Some (hopefully helpful) notation

- **Treatment variable** `\(D\)`: interethnic contact 

  - `\(D_i\)`: Value of `\(D\)` for individual `\(i\)` (.pink[1] = treatment = contact; .blue[0] = control = no contact) 

&lt;br&gt;    
--

- **Outcome variable** *Y*: positive attitudes towards minorities

  - `\(Y_i\)`(.pink[1]): Potential outcome for individual `\(i\)` when `\(D\)` = .pink[1]
  
  - `\(Y_i\)`(.blue[0]): Potential outcome for individual `\(i\)` when `\(D\)` = .blue[0]
  
  - *Translate into words*: `\(Y_{Andrew}\)`(.pink[1])

&lt;br&gt;
--

- **Individual Treatment Effect (ITE)**:

  - `\(ITE\)` = `\(Y_{i}\)`(.pink[1]) - `\(Y_{i}\)`(.blue[0])

  - `\(ITE_{Andrew}\)` =  `\(Attitude_{Andrew}\)`(.pink[1]) `\(-\)` `\(Attitude_{Andrew}\)`(.blue[0])
  
---

### Fundamental Problem of Causal Inference

- Only one potential outcome will ever be realized and observed

--

- But to estimate the ITE, we need the *unobserved* counterfactual outcome:

&lt;br&gt;

Respondent    |   `\(D_i\)` |   `\(Y_{i}\)`(.pink[1])   |   `\(Y_{i}\)`(.blue[0])
-             |   -     |   -                   |   -
Andrew        |   1     |   0                   |   .zomp[??]

&lt;br&gt;


- Here, `\(Y_{Andrew}\)`(.blue[0]) is missing

- We cannot calculate `\(ITE_{Andrew}\)` =  `\(Y_{Andrew}\)`(.pink[1]) `\(-\)` `\(Y_{Andrew}\)`(.blue[0])

---

### Fundamental Problem of Causal Inference

- More generally, our schedule of potential outcomes is incomplete!

&lt;br&gt;

Respondent    |   `\(D_i\)` |   `\(Y_{i}\)`(.pink[1])   |   `\(Y_{i}\)`(.blue[0])   
-             |   -     |   -                   |   -
Andrew        | 1                   | 0                       | .zomp[??]
Barbara       | 1                   | 1                       | .zomp[??]
Charlotte     | 1                   | 1                       | .zomp[??]       
Denis         | 0                   | .zomp[??]               | 0       
Eric          | 0                   | .zomp[??]               | 1       
Fabian        | 0                   | .zomp[??]               | 0       

&lt;br&gt;

- So what can we do?

---

### From Individual to Average Treatment Effects (ATE)

- We **cannot** say anything about the effect of treatment for any individual...

- ...but we **can** make causal statements about the **average treatment effect** (ATE) for the population

&lt;br&gt;
--

- The `\(ATE\)` is the average of all individual-level treatment effects `\(Y_{i}\)`(.pink[1]) `\(-\)` `\(Y_{i}\)`(.blue[0])

- Equivalently, the `\(ATE\)` = `\(\mu_{Y(1)} - \mu_{Y(0)}\)` where

  - `\(\mu_{Y(1)}\)` is the average of all *potential* treatment outcomes `\(Y_{i}\)`(.pink[1])
  
  - `\(\mu_{Y(0)}\)` is the average of all *potential* control outcomes `\(Y_{i}\)`(.blue[0])

&lt;br&gt;
--

- How can we estimate `\(\mu_{Y(1)}\)` and `\(\mu_{Y(0)}\)` given that we are missing some data?

---

class: middle

- Suppose you wanted to find out the average age of people in Germany.

- Unfortunately, you don't have the time to track down every single person and ask them how old they are.

- What would you do?

---

### Relationship to Sampling

- In sampling, we want to know some population parameters (e.g. average age of Germans), but we do not have data on every single person.

- We draw a **random sample**, calculate the mean age in this sample, and use this as an estimate of the mean age in the population.

--

&lt;br&gt;

- Here, we want to know the .pink[average of all (potential) attitudes if everyone were to have contact with outgroups] ( `\(\mu_{Y(1)}\)` ), and the .blue[average of all (potential) attitude if no one were to have contact with outgroups] ( `\(\mu_{Y(0)}\)` )

- How do we draw a random sample of potential outcomes?



---

### Experiments vs. Observational Studies

- In an experiment, the researcher **randomly assigns** people to either treatment or control

  - Since subjects are randomly assigned, the set of **observed** T outcomes constitutes a random sample of **all potential (observed and unobserved)** T outcomes.  
  
  - The same goes for the C outcomes.

&lt;br&gt;

- In an observational study, people can decide for themselves whether they want to have contact with outgroups

  - Individuals "self-select" into treatment or control
  
  - What's the problem here?


---

### Key Take-Away

&lt;!-- In experiments with **random assignment**, the credibility of causal claims is not based on whether the model includes the “right” controls (or has the “right” functional form). --&gt;

&lt;!-- Rather, evidence of causality rests on the **procedure** by which individuals / units are sorted into treatment and control groups. --&gt;

Under random assignment, we can take the average treatment outcomes *in our observed sample* as an **unbiased estimate** of the average of **all potential treatment outcomes.**

&lt;!-- Equivalently: `\(E[Y_i\)`(.blue[0]) `\(| D_i = 0]\)` as equivalent to `\(E[Y_i\)`(.blue[0]) `\(]\)` --&gt;

The same goes for the control outcomes.

The difference between these two averages is the ATE.

In other words, we estimate the ATE, we only need to compare average outcomes in the treatment and control groups.  

  
---

### An important implication of random assignment

Random assignment also implies that any (observed and unobserved) **omitted variables** that affect outcomes are (on average) equally likely to be present in the treatment and control groups. 

Thus the treatment itself is the only systematic driver of differences in outcomes.  

In other words, randomization achieves **balance** between the treatment and control groups.

**We do not need statistical controls**!

--

&lt;br&gt;

In experiments with **random assignment**, the credibility of causal claims is not based on whether the model includes the “right” controls (or has the “right” functional form).

Rather, evidence of causality rests on the **procedure** by which individuals / units are sorted into treatment and control groups.

---

### A Concrete Example

- Suppose we are interested in the effect of **rainfall on election day** on **voter turnout**.  We have the following data:

City    |   Rain?   |   Turnout
-       |   -       |   -      
A       | 1         | 60%
B       | 1         | 55%
C       | 0         | 70%      
D       | 0         | 75%
E       | 1         | 65%
F       | 0         | 80%

--

&lt;br&gt;

- Is rainfall "randomly" assigned to cities?

- What is the ATE?

---

class: middle

**Discuss:** Suppose researchers develop a new "miracle drug" against heart disease.  You want to test the effectiveness of this drug compared to a placebo.

However, the drug is very expensive to manufacture, and you only have 10 doses available.

You nonetheless recruit 1000 people to your study, and randomly assign 10 of them to receive the real drug.  The other 990 receive the placebo.

Is this a problem?


---

class: middle

**Discuss:** A researcher wants to know how winning large sums of money in a national lottery affects peoples views about inheritance taxes. 

The researcher interviews a random sample of adults and compares the attitudes of those who report winning more than $10,000 in the lottery to those who claim to have won little or nothing. 

The researcher reasons that the lottery chooses winners at random, and therefore the amount that people report having won is random.

Is this sound reasoning? Why or why not?

What comparisons might you make instead?

---

### Rearranging the Desk Chairs

Contact theory is supported by hundreds of observational, and mostly cross-sectional, studies ([Pettigrew and Tropp 2006](https://sparq.stanford.edu/sites/g/files/sbiybj19021/files/media/file/pettigrew_tropp_2006_-_intergroup_contact_theory.pdf)
; [Pettigrew et al. 2011](https://www.sciencedirect.com/science/article/pii/S0147176711000332)).

Yet [Elwert et al.](https://www.journals.uchicago.edu/doi/abs/10.1086/724865) find no effect.

&lt;!-- And even field experimental studies "supporting" contact show inconsistent effects across outcomes. --&gt;

How can we explain these inconsistent findings?

What kinds of contributions can (field) experimental studies make to a (mostly) observational body of evidence?

---

### Assumptions

1. **Independence:** Potential outcomes respond solely to receipt of the treatment, not to the assignment itself or any indirect by-products of the assignment.

2. **Non-Interference:** Potential outcomes for each individual reflect only the treatment or control status of that individual and not the treatment or control status of other individuals. No matter which subjects the random assignment allocates to treatment or control, a given subject’s potential outcomes remain the same.

  - This idea is commonly termed the stable unit treatment value assumption (SUTVA).


---

### Independence Example


Suppose you want to test the effectiveness of a new medication. You recruit a sample of people who are interested in the medication, and randomly divide them into treatment and control groups.

The treatment group is asked to take the medication in the form of a pill. The control group is told that their purpose is to serve as comparison group, and thus will not be receiving the medication.  

What's the problem here?

---
### Non-Interference Example

Suppose you are interested in the effectiveness of a new COVID vaccine.  You conduct your study in a retirement home (Seniorenresidenz).

90% of residents are randomly selected to receive the vaccine, while the remaining 10% of residents receive a placebo.

To measure vaccine effectiveness, you compare infection rates between the two groups.

What's the problem here?

(Hint: what if only 10% of residents received the vaccine and 90% the placebo?)

---

class: middle

**Small-group discussion:**  how convinced are you that the **independence** and **non-interference** assumptions hold for [Elwert et al.](https://www.journals.uchicago.edu/doi/abs/10.1086/724865)'s study?

---

###Next week:

- We have seen how randomization allows us to estimate causal effects under the potential outcomes framework.

- But how much uncertainty surrounds our estimates of the ATE?  

- Where does this uncertainty come from?  

- What techniques can we use to test the null hypothesis that the treatment has no effect?

- Please read [Cooperman 2017](https://www.jstor.org/stable/26563425).

  - Focus on the logic of randomization inference
  
  - Skim (or skip) the parts about creating rainfall indices.
  
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "14:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
